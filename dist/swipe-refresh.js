!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).swipeToRefresh=e()}(this,(function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var e={exports:{}};!function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}(e);var o=t(e.exports),n={exports:{}};!function(t){function e(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}(n);var r=t(n.exports),i={exports:{}},s={exports:{}};!function(t){function e(o,n){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(o,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(s),function(t){var e=s.exports;t.exports=function(t,o){if("function"!=typeof o&&null!==o)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(o&&o.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),o&&e(t,o)},t.exports.__esModule=!0,t.exports.default=t.exports}(i);var a=t(i.exports),u={exports:{}},l={exports:{}};!function(t){function e(o){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(l);var c={exports:{}};!function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports}(c);var d=t(c.exports);!function(t){var e=l.exports.default,o=c.exports;t.exports=function(t,n){if(n&&("object"===e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return o(t)},t.exports.__esModule=!0,t.exports.default=t.exports}(u);var f=t(u.exports),p={exports:{}};!function(t){function e(o){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(o)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(p);var h=t(p.exports),x={exports:{}},v={exports:{}};!function(t){t.exports=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")},t.exports.__esModule=!0,t.exports.default=t.exports}(v);var y={exports:{}},m={exports:{}};!function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}(m),function(t){var e=s.exports,o=m.exports;function n(r,i,s){return o()?(t.exports=n=Reflect.construct.bind(),t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=n=function(t,o,n){var r=[null];r.push.apply(r,o);var i=new(Function.bind.apply(t,r));return n&&e(i,n.prototype),i},t.exports.__esModule=!0,t.exports.default=t.exports),n.apply(null,arguments)}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(y),function(t){var e=p.exports,o=s.exports,n=v.exports,r=y.exports;function i(s){var a="function"==typeof Map?new Map:void 0;return t.exports=i=function(t){if(null===t||!n(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==a){if(a.has(t))return a.get(t);a.set(t,i)}function i(){return r(t,arguments,e(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),o(i,t)},t.exports.__esModule=!0,t.exports.default=t.exports,i(s)}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports}(x);var b=t(x.exports);function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=h(t);if(e){var r=h(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return f(this,o)}}var g=function(t){a(n,t);var e=w(n);function n(){var t;return o(this,n),(t=e.call(this)).attachShadow({mode:"open"}),t}return r(n,[{key:"connectedCallback",value:function(){var t=this;if(null!==this.shadowRoot&&(this.shadowRoot.innerHTML=this.template()),this.hasAttribute("animated")&&"true"===this.getAttribute("animated")){var e,o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#container");o&&o.classList.add("animated")}if(null!==t&&null!==t.shadowRoot){var n=document.createElement("style");n.appendChild(document.createTextNode("#container{display:flex;width:1rem;height:1rem;border-radius:50%;box-sizing:border-box;border:3px solid #e5e5e5}#container svg{margin:-3px}#container svg #spinner{transform-origin:center;stroke-dasharray:251.33;stroke-dashoffset:160.65;transform:rotate(-90deg)}#container.animated{-webkit-animation-name:animation;animation-name:animation;-webkit-animation-duration:1.2s;animation-duration:1.2s;-webkit-animation-timing-function:linear;animation-timing-function:linear;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}@-webkit-keyframes animation{0%{transform:rotate(-90deg)}100%{transform:rotate(270deg)}}@keyframes animation{0%{transform:rotate(-90deg)}100%{transform:rotate(270deg)}}")),t.shadowRoot.appendChild(n)}}},{key:"degree",set:function(t){var e,o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("circle");null!=o&&(o.style.transform="rotate(".concat(t,"deg)"))}},{key:"animated",set:function(t){var e,o=null===(e=this.shadowRoot)||void 0===e?void 0:e.querySelector("#container");o&&(t?o.classList.add("animated"):o.classList.remove("animated"))}},{key:"template",value:function(){return'\n    <div id="container">\n      <svg viewBox="0 0 110 110">\n        <circle\n          id="spinner"\n          style="fill:transparent; stroke:#714C89; stroke-width:18px; stroke-linecap:round;"\n          cx="55"\n          cy="55"\n          r="45"\n        ></circle>\n      </svg>\n    </div>\n    '}}]),n}(b(HTMLElement));function R(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=h(t);if(e){var r=h(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return f(this,o)}}var T=function(t){a(n,t);var e=R(n);function n(){var t;return o(this,n),(t=e.call(this)).attachShadow({mode:"open"}),t._text="Swipe to refresh",t.spinner=null,t}return r(n,[{key:"connectedCallback",value:function(){var t,e=this,o=this,n=null;null!==this.shadowRoot&&(this.hasAttribute("text")&&""!==String(this.getAttribute("text")).trim()&&(this._text=String(this.getAttribute("text")).trim()),this.shadowRoot.innerHTML=this.template({text:this._text}),n=null===(t=this.shadowRoot)||void 0===t?void 0:t.querySelector(".container"));if(null!==o&&null!==o.shadowRoot){var r=document.createElement("style");r.appendChild(document.createTextNode(".container{position:fixed;height:2rem;padding:0 .75rem;top:.5rem;display:flex;flex-direction:row;align-items:center;background-color:#fff;border-radius:1rem;z-index:999;left:50vw;transform:translateX(-50%);box-shadow:0 1px 1px 0 rgba(66,66,66,.08),0 1px 3px 1px rgba(66,66,66,.16)}.container span{margin-left:.25rem;font-size:.875rem;line-height:1rem;color:#666}.container.hide{transition:all .9s ease;transform:translateX(-50%) translateY(-200%)}")),o.shadowRoot.appendChild(r)}n&&n.addEventListener("transitionend",(function(){e.style.display="none"}))}},{key:"text",set:function(t){if(this._text=t,null!==this.shadowRoot){var e=this.shadowRoot.getElementById("hint-text");null!==e&&(e.textContent=t)}}},{key:"template",value:function(t){return'\n    <div class="container">\n      <spinner-icon></spinner-icon>\n      <span id="hint-text">'.concat(t.text,"</span>\n    </div>\n    ")}}]),n}(b(HTMLElement));function _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,n=h(t);if(e){var r=h(this).constructor;o=Reflect.construct(n,arguments,r)}else o=n.apply(this,arguments);return f(this,o)}}var M=function(t){a(n,t);var e=_(n);function n(){var t;return o(this,n),(t=e.call(this)).attachShadow({mode:"open"}),t.swipeTarget=window,t.pullHintText="Swipe to refresh",t.dropHintText="Release to refresh",t.refreshText="Refreshing",t.finishText="Updated",t.isPassiveSupport=!1,t.enablePassive=!1,t.distanceThreshold=60,t.touchStartY=null,t.touchMoveY=0,t.setupDOM=t.setupDOM.bind(d(t)),t.parseAttributes=t.parseAttributes.bind(d(t)),t.checkPassiveSupport=t.checkPassiveSupport.bind(d(t)),t.onTouchStart=t.onTouchStart.bind(d(t)),t.onTouchMove=t.onTouchMove.bind(d(t)),t.onTouchEnd=t.onTouchEnd.bind(d(t)),t.doRefresh=t.doRefresh.bind(d(t)),t.checkPassiveSupport(),t._refresh=function(){},t}return r(n,[{key:"connectedCallback",value:function(){this.parseAttributes(),this.setupDOM(),this.swipeTarget.addEventListener("touchstart",this.onTouchStart),this.swipeTarget.addEventListener("touchmove",this.onTouchMove),this.swipeTarget.addEventListener("touchend",this.onTouchEnd)}},{key:"disconnectedCallback",value:function(){this.swipeTarget.removeEventListener("touchstart",this.onTouchStart),this.swipeTarget.removeEventListener("touchmove",this.onTouchMove),this.swipeTarget.removeEventListener("touchend",this.onTouchEnd)}},{key:"setupDOM",value:function(){null!==this.shadowRoot&&(this.shadowRoot.innerHTML=this.template(this.pullHintText))}},{key:"parseAttributes",value:function(){this.hasAttribute("pull-text")&&(this.pullHintText=String(this.getAttribute("pull-text"))),this.hasAttribute("drop-text")&&(this.dropHintText=String(this.getAttribute("drop-text"))),this.hasAttribute("refresh-text")&&(this.refreshText=String(this.getAttribute("refresh-text"))),this.hasAttribute("finish-text")&&(this.finishText=String(this.getAttribute("finish-text")))}},{key:"onTouchStart",value:function(t){var e=t;this.shouldRefresh()&&(this.touchStartY=e.touches[0].screenY)}},{key:"onTouchMove",value:function(t){var e,o=t,n=null===(e=this.shadowRoot)||void 0===e?void 0:e.getElementById("loading");if(null!=n){var r,i=null===(r=n.shadowRoot)||void 0===r?void 0:r.querySelector("spinner-icon");if(null!=i&&this.shouldRefresh()&&null!==this.touchStartY){var s;this.touchMoveY=o.touches[0].screenY-this.touchStartY,i.degree=-90+this.touchMoveY;var a,u,l=null===(s=n.shadowRoot)||void 0===s?void 0:s.querySelector(".container");if(null!=l&&(l.style.top="".concat(this.touchMoveY/5,"px")),this.touchMoveY>this.distanceThreshold)n.style.display="flex",i.animated=!1,null===(a=n.shadowRoot)||void 0===a||null===(u=a.querySelector(".container"))||void 0===u||u.classList.remove("hide");this.touchMoveY>2*this.distanceThreshold?n.text=this.dropHintText:this.touchMoveY>this.distanceThreshold&&(n.text=this.pullHintText)}}}},{key:"onTouchEnd",value:function(){var t,e=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("loading");if(null!=e){var o,n=null===(o=e.shadowRoot)||void 0===o?void 0:o.querySelector("spinner-icon");if(null!=n){var r,i=null===(r=e.shadowRoot)||void 0===r?void 0:r.querySelector(".container");this.touchMoveY>2*this.distanceThreshold?(n.animated=!0,null!=i&&(i.style.top="0.5rem"),e.text=this.refreshText,this.doRefresh()):null!=i&&i.classList.add("hide")}}}},{key:"checkPassiveSupport",value:function(){var t=this;try{window.addEventListener("test",(function(){}),{get passive(){return t.isPassiveSupport=!0,!0}})}catch(t){}}},{key:"shouldRefresh",value:function(){return window.scrollY<50}},{key:"doRefresh",value:function(){var t;this._refresh();var e=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById("loading");if(null!=e){var o;e.text=this.finishText;var n=null===(o=e.shadowRoot)||void 0===o?void 0:o.querySelector(".container");null!==n&&void 0!==e&&setTimeout((function(){n.classList.add("hide")}),100)}}},{key:"refresh",set:function(t){"function"==typeof t&&(this._refresh=t)}},{key:"template",value:function(t){return'\n      <h1 id="testtest"></h1>\n      <refresh-loading\n        id="loading"\n        text="'.concat(t,'"\n        style="display: none;"\n      >\n      </refresh-loading>\n    ')}}]),n}(b(HTMLElement));return window.customElements.define("spinner-icon",g),window.customElements.define("refresh-loading",T),window.customElements.define("swipe-refresh",M),M}));
