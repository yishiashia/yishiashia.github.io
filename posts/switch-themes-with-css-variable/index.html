<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>使用 CSS Variables 切換前端主題(Theme) | yishiashia&#39;s Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Photo by Joanna Kosinska on Unsplash
前端專案時常需要進行主題(Theme)切換，比方說現在最常見的 light/dark mode 主題切換。
本文將介紹如何透過 CSS Variables (或 CSS Custom Properties) 及 HTML root element 上的屬性控制前端網頁的主題切換。
CSS Variables (或 CSS Custom Properties)是 CSS3 的新功能，讓您可以不用透過SASS、SCSS等預處理語言即可在原生 CSS 語法中使用變數，讓 CSS 語法也可以達到 Clean Code。
:root { --primary-color: blue; } p { color: var(--primary-color); } h1 { color: var(--primary-color); } ▲範例：透過 CSS Variable 指定主題色彩的顏色
上面是一個簡單的範例，透過一個 &ndash;primary-color 的變數指定主題色彩，並套用到網頁中不同元的的樣式之中，未來要修改主題色時，只需要更新該變數，就可以一次性切換頁面中元件(如範例中的 與 標籤)的主題色，而不用一項一項的修改 CSS 樣式。
Theme 主題切換 從前面的說明中可以得知，宣告 Theme 相關的 CSS Variables 時通常會將變數的定義寫在 :root 的區塊中讓全域的 element 元件都可以取用，這意思就是說 CSS 變數需要定義在 document.">
<meta name="author" content="">
<link rel="canonical" href="https://yishiashia.github.io/posts/switch-themes-with-css-variable/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3e218dd9b3bab3f2ebac3f658027d6c4c9641e6641fee2ab61ee5861491ca923.css" integrity="sha256-PiGN2bO6s/LrrD9lgCfWxMlkHmZB/uKrYe5YYUkcqSM=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://yishiashia.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://yishiashia.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://yishiashia.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://yishiashia.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://yishiashia.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="使用 CSS Variables 切換前端主題(Theme)" />
<meta property="og:description" content="Photo by Joanna Kosinska on Unsplash
前端專案時常需要進行主題(Theme)切換，比方說現在最常見的 light/dark mode 主題切換。
本文將介紹如何透過 CSS Variables (或 CSS Custom Properties) 及 HTML root element 上的屬性控制前端網頁的主題切換。
CSS Variables (或 CSS Custom Properties)是 CSS3 的新功能，讓您可以不用透過SASS、SCSS等預處理語言即可在原生 CSS 語法中使用變數，讓 CSS 語法也可以達到 Clean Code。
:root { --primary-color: blue; } p { color: var(--primary-color); } h1 { color: var(--primary-color); } ▲範例：透過 CSS Variable 指定主題色彩的顏色
上面是一個簡單的範例，透過一個 &ndash;primary-color 的變數指定主題色彩，並套用到網頁中不同元的的樣式之中，未來要修改主題色時，只需要更新該變數，就可以一次性切換頁面中元件(如範例中的 與 標籤)的主題色，而不用一項一項的修改 CSS 樣式。
Theme 主題切換 從前面的說明中可以得知，宣告 Theme 相關的 CSS Variables 時通常會將變數的定義寫在 :root 的區塊中讓全域的 element 元件都可以取用，這意思就是說 CSS 變數需要定義在 document." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://yishiashia.github.io/posts/switch-themes-with-css-variable/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-08-10T14:36:11+08:00" />
<meta property="article:modified_time" content="2022-08-10T14:36:11+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="使用 CSS Variables 切換前端主題(Theme)"/>
<meta name="twitter:description" content="Photo by Joanna Kosinska on Unsplash
前端專案時常需要進行主題(Theme)切換，比方說現在最常見的 light/dark mode 主題切換。
本文將介紹如何透過 CSS Variables (或 CSS Custom Properties) 及 HTML root element 上的屬性控制前端網頁的主題切換。
CSS Variables (或 CSS Custom Properties)是 CSS3 的新功能，讓您可以不用透過SASS、SCSS等預處理語言即可在原生 CSS 語法中使用變數，讓 CSS 語法也可以達到 Clean Code。
:root { --primary-color: blue; } p { color: var(--primary-color); } h1 { color: var(--primary-color); } ▲範例：透過 CSS Variable 指定主題色彩的顏色
上面是一個簡單的範例，透過一個 &ndash;primary-color 的變數指定主題色彩，並套用到網頁中不同元的的樣式之中，未來要修改主題色時，只需要更新該變數，就可以一次性切換頁面中元件(如範例中的 與 標籤)的主題色，而不用一項一項的修改 CSS 樣式。
Theme 主題切換 從前面的說明中可以得知，宣告 Theme 相關的 CSS Variables 時通常會將變數的定義寫在 :root 的區塊中讓全域的 element 元件都可以取用，這意思就是說 CSS 變數需要定義在 document."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://yishiashia.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "使用 CSS Variables 切換前端主題(Theme)",
      "item": "https://yishiashia.github.io/posts/switch-themes-with-css-variable/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "使用 CSS Variables 切換前端主題(Theme)",
  "name": "使用 CSS Variables 切換前端主題(Theme)",
  "description": "Photo by Joanna Kosinska on Unsplash\n前端專案時常需要進行主題(Theme)切換，比方說現在最常見的 light/dark mode 主題切換。\n本文將介紹如何透過 CSS Variables (或 CSS Custom Properties) 及 HTML root element 上的屬性控制前端網頁的主題切換。\nCSS Variables (或 CSS Custom Properties)是 CSS3 的新功能，讓您可以不用透過SASS、SCSS等預處理語言即可在原生 CSS 語法中使用變數，讓 CSS 語法也可以達到 Clean Code。\n:root { --primary-color: blue; } p { color: var(--primary-color); } h1 { color: var(--primary-color); } ▲範例：透過 CSS Variable 指定主題色彩的顏色\n上面是一個簡單的範例，透過一個 \u0026ndash;primary-color 的變數指定主題色彩，並套用到網頁中不同元的的樣式之中，未來要修改主題色時，只需要更新該變數，就可以一次性切換頁面中元件(如範例中的 與 標籤)的主題色，而不用一項一項的修改 CSS 樣式。\nTheme 主題切換 從前面的說明中可以得知，宣告 Theme 相關的 CSS Variables 時通常會將變數的定義寫在 :root 的區塊中讓全域的 element 元件都可以取用，這意思就是說 CSS 變數需要定義在 document.",
  "keywords": [
    
  ],
  "articleBody": " Photo by Joanna Kosinska on Unsplash\n前端專案時常需要進行主題(Theme)切換，比方說現在最常見的 light/dark mode 主題切換。\n本文將介紹如何透過 CSS Variables (或 CSS Custom Properties) 及 HTML root element 上的屬性控制前端網頁的主題切換。\nCSS Variables (或 CSS Custom Properties)是 CSS3 的新功能，讓您可以不用透過SASS、SCSS等預處理語言即可在原生 CSS 語法中使用變數，讓 CSS 語法也可以達到 Clean Code。\n:root { --primary-color: blue; } p { color: var(--primary-color); } h1 { color: var(--primary-color); } ▲範例：透過 CSS Variable 指定主題色彩的顏色\n上面是一個簡單的範例，透過一個 –primary-color 的變數指定主題色彩，並套用到網頁中不同元的的樣式之中，未來要修改主題色時，只需要更新該變數，就可以一次性切換頁面中元件(如範例中的 與 標籤)的主題色，而不用一項一項的修改 CSS 樣式。\nTheme 主題切換 從前面的說明中可以得知，宣告 Theme 相關的 CSS Variables 時通常會將變數的定義寫在 :root 的區塊中讓全域的 element 元件都可以取用，這意思就是說 CSS 變數需要定義在 document.documentElement 的 element 上，一般而言就是 這個 element。\n而在進行主題切換時，也可以透過 document.documentElement 的屬性或加上 class 來讓 CSS 變數可以透過選擇器 (Selector) 來進行切換。\n比方說我們定義一個 CSS 樣式，透過 document.documentElement 屬性選擇器切換 --bg-color CSS 變數的定義值。\n[data-theme=\"light\"] { --bg-color: #FFFFFF; /* white */ } [data-theme=\"dark\"] { --bg-color: #000000; /* black */ } body { backgrourd-color: var(--bg-color); } ▲範例：透過 Element Attribute 來切換 CSS Variable 的值\n當 element 的 data-theme 屬性值改變時 (如下範例)，頁面的背景顏色就會因為 CSS 變數值改變而切換成相對應的主題。\n[HTML] \u003chtml data-theme=\"light\"\u003e \u003cbody\u003e\u003c/body\u003e \u003c/html\u003e \u003chtml data-theme=\"dark\"\u003e \u003cbody\u003e\u003c/body\u003e \u003c/html\u003e 在 WebComponent 中使用 CSS 變數 WebComponent 是常用的 element 封裝技術，透過 ShadowDOM 的使用，可以做到隔離 (isolation) ，讓自行定義的元件 ShadowDOM 內部與 host 頁面中的 CSS樣式 及 JavaScript 程式碼不會互相汙染。\n在 ShadowDOM 中，我們也可以使用 host 頁面中 :root 裡面定義的 CSS 變數，但如果是在 WebComponent 中要定義或自行宣告 CSS 變數時，建議可以在 :host 這個元素上進行，這樣做的好處是，可以確保自定義元件的 CSS 的封閉性，避免汙染 host 頁面中的 CSS 樣式，範例如下：\n:host { --primary-color: #209cff; } button { backgrourd-color: var(--primary-color); } 要在 WebComponent 上進行主題切換時，也可以透過在自定義的 customElement 上的屬性來進行切換，如:\n:host { --bg-color: white; } :host([data-theme=\"dark\"]) { --bg-color: black; } .container { backgrourd-color: var(--bg-color); } —\n[HTML] \u003ccustom-element data-theme=\"light\"\u003e #shadow-root (open) \u003c/custom-element\u003e \u003ccustom-element data-theme=\"dark\"\u003e #shadow-root (open) \u003c/custom-element\u003e 搭配 TailwindCSS 使用 使用 Tailwind 進行前端樣式開發時通常會定義一個 tailwind.config.js，將團隊中定義好的樣式規格寫在裡面，而 TailwindCSS 也支援將 CSS 變數定義到 tailwind.config.js 裏面，範例如下:\n// tailwind.config.js module.exports = { //... theme: { colors: { 'primary': 'var(--primary-color)', 'secondary': 'var(--secondary-color)', 'gray': { 100: 'var(--gray-100)', 200: 'var(--gray-200)', 600: 'var(--gray-600)' } } }, //... } ",
  "wordCount" : "278",
  "inLanguage": "en",
  "datePublished": "2022-08-10T14:36:11+08:00",
  "dateModified": "2022-08-10T14:36:11+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://yishiashia.github.io/posts/switch-themes-with-css-variable/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "yishiashia's Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://yishiashia.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://yishiashia.github.io/" accesskey="h" title="yishiashia (Alt + H)">
                    <svg version='1.0' xmlns='http://www.w3.org/2000/svg' width='48px' height='48px' viewBox='0 0 464.000000 466.000000' preserveAspectRatio='xMidYMid meet'><g transform='translate(0.000000,466.000000) scale(0.100000,-0.100000)' fill='currentColor' stroke='none'><path d='M300 4473 c-56 -24 -98 -61 -123 -106 -20 -38 -22 -56 -21 -172 0 -100 5 -148 22 -208 12 -43 23 -81 26 -85 3 -5 7 -20 10 -34 6 -35 75 -233 92 -266 8 -15 14 -36 14 -48 0 -22 33 -108 82 -214 16 -36 39 -90 50 -120 11 -30 26 -62 33 -70 7 -8 20 -32 28 -52 9 -20 36 -68 61 -107 26 -39 50 -81 56 -95 5 -14 35 -60 67 -102 32 -42 67 -89 78 -105 11 -15 47 -50 81 -78 33 -27 61 -56 61 -63 2 -57 25 -264 33 -308 6 -30 13 -70 16 -88 2 -18 9 -42 14 -53 6 -10 15 -45 21 -76 6 -32 17 -71 24 -88 7 -16 21 -50 30 -75 9 -25 25 -65 35 -90 l18 -46 -77 -39 c-49 -26 -94 -59 -125 -93 -28 -30 -63 -60 -78 -68 -15 -8 -39 -31 -53 -52 -14 -20 -45 -62 -70 -92 -69 -85 -173 -304 -195 -410 -7 -30 -15 -68 -18 -85 -4 -16 -7 -95 -7 -175 1 -132 3 -152 29 -228 15 -45 31 -82 35 -82 4 0 27 -27 52 -60 36 -50 56 -67 114 -94 39 -19 88 -39 110 -45 44 -12 886 -16 994 -5 l61 7 0 98 0 99 -140 0 -140 0 0 406 0 406 23 -14 c12 -8 40 -21 62 -28 22 -7 57 -24 79 -37 55 -35 240 -98 257 -87 4 2 10 0 13 -5 14 -21 295 -37 406 -22 151 20 333 72 393 114 43 30 147 68 148 54 3 -62 4 -694 1 -734 l-4 -52 -151 -3 -152 -3 -3 -74 c-3 -69 -1 -76 24 -102 l28 -29 193 0 c154 0 200 3 223 15 61 32 60 21 60 618 l0 544 23 25 c151 167 251 308 299 421 16 40 39 91 49 113 49 110 83 290 95 504 7 119 8 120 107 197 31 24 57 50 57 57 0 7 27 44 60 82 33 38 63 80 66 94 4 14 18 41 33 60 29 38 141 232 141 244 0 4 25 59 55 121 30 63 55 117 55 120 0 3 8 24 19 48 10 23 29 76 41 117 13 41 28 84 35 96 7 11 21 49 31 85 10 35 29 93 42 129 48 132 54 162 55 290 1 142 -9 190 -53 238 -75 82 -188 102 -321 58 -91 -30 -223 -88 -304 -134 -91 -52 -124 -74 -128 -85 -3 -7 -23 -19 -46 -27 -22 -7 -49 -22 -58 -33 -10 -10 -27 -23 -38 -27 -11 -5 -62 -40 -114 -79 -84 -63 -167 -150 -230 -238 -12 -18 -31 -33 -41 -33 -10 0 -40 18 -66 41 -47 38 -220 129 -247 129 -7 0 -17 4 -23 9 -8 8 -160 51 -194 56 -8 1 -24 5 -35 10 -11 5 -114 10 -230 10 -219 0 -293 -3 -310 -14 -5 -4 -23 -8 -40 -10 -35 -4 -231 -68 -260 -85 -11 -7 -39 -18 -62 -24 -22 -7 -63 -27 -90 -45 -73 -50 -78 -51 -114 -9 -36 41 -200 178 -279 232 -28 19 -73 52 -101 73 -28 20 -56 37 -63 37 -6 0 -51 27 -100 60 -49 33 -98 62 -108 66 -10 3 -18 9 -18 14 0 4 -12 11 -27 15 -16 3 -47 15 -70 26 -24 10 -62 28 -86 38 -112 51 -236 65 -307 34z m3934 -209 c16 -22 18 -37 12 -98 -7 -88 -10 -109 -18 -121 -3 -6 -9 -26 -12 -45 -4 -19 -11 -46 -16 -60 -5 -14 -16 -52 -26 -85 -10 -33 -23 -69 -30 -80 -6 -11 -17 -45 -24 -75 -7 -30 -18 -65 -26 -77 -8 -12 -14 -29 -14 -36 0 -8 -20 -55 -45 -106 -25 -50 -45 -96 -45 -101 0 -17 -78 -176 -113 -231 -19 -30 -48 -81 -65 -115 -17 -33 -41 -73 -54 -88 -66 -79 -77 -90 -78 -76 -2 37 -35 238 -43 260 -3 8 -11 33 -17 55 -7 22 -35 90 -63 150 -41 90 -68 130 -144 220 -51 61 -93 116 -93 123 0 31 43 92 105 147 36 33 79 72 95 87 16 15 46 35 67 43 21 9 49 26 63 39 31 28 123 86 137 86 6 0 33 15 61 33 111 72 172 106 197 107 11 1 52 16 90 35 39 18 72 34 75 34 3 0 13 -11 24 -25z m-3733 -14 c41 -16 77 -30 82 -30 4 0 51 -26 105 -57 53 -31 124 -70 157 -87 33 -17 94 -56 135 -87 42 -31 87 -62 100 -69 44 -23 153 -120 224 -199 18 -20 18 -21 -37 -81 -31 -33 -68 -77 -83 -98 -15 -20 -42 -53 -59 -72 -18 -19 -40 -57 -50 -84 -10 -27 -28 -65 -41 -83 -12 -19 -26 -48 -30 -66 -3 -18 -17 -54 -29 -82 -23 -50 -53 -185 -57 -260 l-3 -40 -35 48 c-19 27 -47 63 -61 80 -15 18 -30 43 -34 57 -4 14 -31 66 -61 116 -30 51 -54 95 -54 99 0 4 -7 21 -15 38 -8 18 -24 57 -35 87 -12 30 -26 60 -32 67 -5 7 -21 43 -35 80 -35 95 -74 206 -77 218 -1 6 -7 20 -14 32 -7 12 -15 44 -19 70 -3 26 -9 53 -13 58 -4 6 -22 68 -40 138 -32 130 -34 175 -7 218 16 26 33 24 118 -11z m2079 -416 c153 -37 231 -66 334 -125 117 -67 180 -116 261 -204 73 -78 185 -224 185 -241 0 -12 34 -96 51 -127 9 -17 41 -138 60 -227 10 -46 14 -448 5 -457 -3 -3 -18 6 -33 21 -89 83 -124 103 -219 126 -119 29 -198 19 -314 -38 -44 -21 -132 -104 -150 -140 -8 -15 -19 -34 -26 -42 -42 -55 -57 -221 -29 -317 20 -66 31 -87 85 -156 93 -120 287 -184 438 -144 31 8 28 -3 -13 -43 -19 -19 -35 -41 -35 -49 0 -24 -180 -190 -278 -257 -52 -35 -112 -69 -135 -75 -23 -6 -46 -14 -52 -18 -17 -13 -130 -51 -178 -60 l-45 -8 21 41 c12 23 27 47 34 54 7 7 13 19 13 27 0 7 7 26 15 41 28 54 37 129 25 191 -21 101 -127 201 -230 219 -65 10 -123 12 -135 4 -5 -3 -21 -7 -33 -8 -70 -3 -188 -112 -209 -191 -7 -25 -13 -61 -13 -79 0 -63 38 -167 86 -237 19 -27 18 -55 -3 -55 -16 0 -108 31 -233 78 -56 21 -167 93 -239 155 -30 26 -58 47 -61 47 -4 0 -23 21 -44 47 -20 27 -59 77 -87 112 -27 35 -48 65 -46 67 2 3 17 0 33 -6 71 -27 213 -1 306 57 21 13 42 23 46 23 10 0 102 114 102 125 0 4 8 19 19 33 48 68 53 273 8 354 -38 70 -43 77 -78 116 -94 102 -188 146 -314 146 -102 0 -207 -34 -250 -79 -21 -23 -87 -67 -92 -62 -8 9 -9 346 -1 405 17 119 39 198 85 300 12 29 23 57 23 63 0 18 29 67 67 112 21 25 52 64 68 87 36 51 138 151 185 184 117 80 199 126 263 146 39 13 77 26 82 30 11 8 73 23 77 19 2 -1 12 3 23 9 20 10 42 14 165 33 96 14 294 1 410 -27z m-1049 -1448 c54 -19 116 -74 133 -117 18 -45 20 -108 5 -162 -12 -45 -79 -112 -127 -128 -52 -17 -130 -6 -195 26 -71 36 -87 65 -95 163 -4 64 -2 79 18 115 25 45 28 47 99 89 51 30 105 35 162 14z m1686 -12 c99 -52 123 -88 123 -182 0 -47 -25 -129 -47 -154 -40 -44 -180 -89 -209 -66 -7 5 -16 7 -20 6 -5 -2 -33 12 -62 30 -114 70 -136 228 -43 320 73 73 173 91 258 46z m-878 -739 c34 -17 41 -32 41 -93 0 -59 -17 -93 -53 -105 -41 -13 -75 -1 -97 36 -25 40 -25 86 -3 126 29 49 65 61 112 36z m-976 -234 l27 -33 0 -484 0 -484 -267 0 c-193 0 -275 4 -292 13 -45 22 -108 111 -120 169 -24 112 -15 285 17 368 5 14 9 27 9 30 0 3 9 23 20 45 12 22 26 58 32 80 18 67 137 226 221 296 41 34 78 66 81 71 3 5 34 23 70 42 l64 33 55 -57 c30 -31 67 -71 83 -89z'/></g></svg>yishiashia</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://yishiashia.github.io/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      使用 CSS Variables 切換前端主題(Theme)
    </h1>
    <div class="post-meta"><span title='2022-08-10 14:36:11 +0800 CST'>August 10, 2022</span>

</div>
  </header> 
  <div class="post-content"><p><img loading="lazy" src="/images/joanna-kosinska-bF2vsubyHcQ-unsplash.jpg" alt="Image Alt Text"  />

<em>Photo by <a href="https://unsplash.com/@joannakosinska">Joanna Kosinska</a> on <a href="https://unsplash.com/">Unsplash</a></em></p>
<p>前端專案時常需要進行主題(Theme)切換，比方說現在最常見的 <strong>light/dark mode</strong> 主題切換。</p>
<p>本文將介紹如何透過 CSS Variables (或 CSS Custom Properties) 及 HTML root element 上的屬性控制前端網頁的主題切換。</p>
<p>CSS Variables (或 CSS Custom Properties)是 CSS3 的新功能，讓您可以不用透過SASS、SCSS等預處理語言即可在原生 CSS 語法中使用變數，讓 CSS 語法也可以達到 Clean Code。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>:<span style="color:#a6e22e">root</span> {
</span></span><span style="display:flex;"><span>    --primary-color: <span style="color:#66d9ef">blue</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">p</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>primary<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">h1</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">color</span>: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>primary<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><em>▲範例：透過 CSS Variable 指定主題色彩的顏色</em></p>
<p>上面是一個簡單的範例，透過一個 &ndash;primary-color 的變數指定主題色彩，並套用到網頁中不同元的的樣式之中，未來要修改主題色時，只需要更新該變數，就可以一次性切換頁面中元件(如範例中的 <!-- raw HTML omitted --> 與 <!-- raw HTML omitted --> 標籤)的主題色，而不用一項一項的修改 CSS 樣式。</p>
<hr>
<h2 id="theme-主題切換">Theme 主題切換<a hidden class="anchor" aria-hidden="true" href="#theme-主題切換">#</a></h2>
<p>從前面的說明中可以得知，宣告 Theme 相關的 CSS Variables 時通常會將變數的定義寫在 <code>:root</code> 的區塊中讓全域的 element 元件都可以取用，這意思就是說 CSS 變數需要定義在 <code>document.documentElement</code> 的 element 上，一般而言就是 <code>&lt;html&gt;</code> 這個 element。</p>
<p>而在進行主題切換時，也可以透過 <code>document.documentElement</code> 的屬性或加上 class 來讓 CSS 變數可以透過選擇器 (Selector) 來進行切換。</p>
<p>比方說我們定義一個 CSS 樣式，透過 <code>document.documentElement</code> 屬性選擇器切換 <code>--bg-color</code> CSS 變數的定義值。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#f92672">data-theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;light&#34;</span><span style="color:#f92672">]</span> {
</span></span><span style="display:flex;"><span>    --bg-color: <span style="color:#ae81ff">#FFFFFF</span>; <span style="color:#75715e">/* white */</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span><span style="color:#f92672">data-theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dark&#34;</span><span style="color:#f92672">]</span> {
</span></span><span style="display:flex;"><span>    --bg-color: <span style="color:#ae81ff">#000000</span>; <span style="color:#75715e">/* black */</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">body</span> {
</span></span><span style="display:flex;"><span>    backgrourd-color: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>bg<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><em>▲範例：透過 Element Attribute 來切換 CSS Variable 的值</em></p>
<p>當 <code>&lt;html&gt;</code> element 的 <code>data-theme</code> 屬性值改變時 (如下範例)，頁面的背景顏色就會因為 CSS 變數值改變而切換成相對應的主題。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>[HTML]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- light mode --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">data-theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;light&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- dark mode --&gt;</span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">data-theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dark&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">body</span>&gt;&lt;/<span style="color:#f92672">body</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">html</span>&gt;
</span></span></code></pre></div><hr>
<h2 id="在-webcomponent-中使用-css-變數">在 WebComponent 中使用 CSS 變數<a hidden class="anchor" aria-hidden="true" href="#在-webcomponent-中使用-css-變數">#</a></h2>
<p>WebComponent 是常用的 element 封裝技術，透過 ShadowDOM 的使用，可以做到隔離 (isolation) ，讓自行定義的元件 ShadowDOM 內部與 host 頁面中的 CSS樣式 及 JavaScript 程式碼不會互相汙染。</p>
<p>在 ShadowDOM 中，我們也可以使用 host 頁面中 <code>:root</code> 裡面定義的 CSS 變數，但如果是在 WebComponent 中要定義或自行宣告 CSS 變數時，建議可以在 <code>:host</code> 這個元素上進行，這樣做的好處是，可以確保自定義元件的 CSS 的封閉性，避免汙染 host 頁面中的 CSS 樣式，範例如下：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>:<span style="color:#a6e22e">host</span> {
</span></span><span style="display:flex;"><span>    --primary-color: <span style="color:#ae81ff">#209cff</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">button</span> {
</span></span><span style="display:flex;"><span>    backgrourd-color: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>primary<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>要在 WebComponent 上進行主題切換時，也可以透過在自定義的 <code>customElement</code> 上的屬性來進行切換，如:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-css" data-lang="css"><span style="display:flex;"><span>:<span style="color:#a6e22e">host</span> {
</span></span><span style="display:flex;"><span>    --bg-color: <span style="color:#66d9ef">white</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>:<span style="color:#a6e22e">host</span><span style="color:#f92672">([</span><span style="color:#f92672">data-theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dark&#34;</span><span style="color:#f92672">])</span> {
</span></span><span style="display:flex;"><span>    --bg-color: <span style="color:#66d9ef">black</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>.<span style="color:#a6e22e">container</span> {
</span></span><span style="display:flex;"><span>    backgrourd-color: <span style="color:#a6e22e">var</span>(<span style="color:#f92672">--</span>bg<span style="color:#f92672">-</span><span style="color:#66d9ef">color</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>—</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span>[HTML]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">custom-element</span> <span style="color:#a6e22e">data-theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;light&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    #shadow-root (open)
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">custom-element</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">custom-element</span> <span style="color:#a6e22e">data-theme</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;dark&#34;</span>&gt;
</span></span><span style="display:flex;"><span>    #shadow-root (open)
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">custom-element</span>&gt;
</span></span></code></pre></div><hr>
<h2 id="搭配-tailwindcss-使用">搭配 TailwindCSS 使用<a hidden class="anchor" aria-hidden="true" href="#搭配-tailwindcss-使用">#</a></h2>
<p>使用 Tailwind 進行前端樣式開發時通常會定義一個 <code>tailwind.config.js</code>，將團隊中定義好的樣式規格寫在裡面，而 TailwindCSS 也支援將 CSS 變數定義到 <code>tailwind.config.js</code> 裏面，範例如下:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// tailwind.config.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">module</span>.<span style="color:#a6e22e">exports</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">theme</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">colors</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;primary&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;var(--primary-color)&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;secondary&#39;</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;var(--secondary-color)&#39;</span>,
</span></span><span style="display:flex;"><span>            <span style="color:#e6db74">&#39;gray&#39;</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">100</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;var(--gray-100)&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">200</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;var(--gray-200)&#39;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#ae81ff">600</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;var(--gray-600)&#39;</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">//...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>© 2023. Content on this site is licensed under a CC BY 4.0 license.</span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
